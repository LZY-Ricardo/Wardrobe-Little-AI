## 1. 需求与交互确认
- [x] 1.1 明确“首次进入”的范围：按会话（sessionStorage）还是按用户持久化（localStorage）。
- [x] 1.2 明确拒绝定位后的表现：继续使用默认城市显示，是否需要提示文案/入口让用户再次授权。

## 2. 后端：按坐标查询天气
- [x] 2.1 扩展 `/weather/today` 支持 `lat`/`lon`（浮点，范围校验），优先使用坐标请求 Open‑Meteo。
- [x] 2.2 缓存按坐标分桶（TTL 可配），避免不同位置互相污染。
- [x] 2.3 明确失败策略：第三方失败/超时时返回兜底数据且 `code=1`，避免前端弹全局“网络异常”。

## 3. 前端：定位与带参请求
- [x] 3.1 Home 首次进入（登录态）触发定位请求；成功后将坐标写入 sessionStorage 并刷新天气。
- [x] 3.2 `fetchWeather` 支持可选坐标参数，调用 `/weather/today?lat=...&lon=...`。
- [x] 3.3 兼容处理：不支持/拒绝/超时 → 不抛错、不阻断页面，仅使用默认天气。

## 4. 验证
- [ ] 4.1 手工冒烟：允许定位/拒绝定位/不支持定位（模拟）/接口超时回退。
- [ ] 4.2 前端 lint：`cd client && npm run lint`。
